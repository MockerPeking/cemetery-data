<html>

<head>

<title>Lewisburg Cemetery</title>

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css"
   integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
   crossorigin=""/>

   <script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"
   integrity="sha512-GffPMF3RvMeYyc1LWMHtK8EbPv0iNZ8/oTtHPx9/cc2ILxQ+u905qIwdpULaqDkyBKgOaB57QTMg7ztg8Jm2Og=="
   crossorigin=""></script>

<style>
#map {
    width: 300px;
    height:300px;
}
</style>

</head>

<body>

    <div id="map"></div>

<script>
    var base = {'Empty': L.tileLayer('')};

    var map = L.map('map',{'center': [0, 0], 'zoom': 15, 'layers': [base.Empty], 'zoomControl': false, 'attributionControl': false});
    map.touchZoom.disable();
    map.doubleClickZoom.disable();
    map.scrollWheelZoom.disable();
    
    var mapWidth = map.getBounds().getNorthEast().lng - map.getBounds().getSouthWest().lng,
        mapHeight = map.getBounds().getNorthEast().lat - map.getBounds().getSouthWest().lat;

    var countX = 10; //cells by x
    var countY = 10; //cells by y
    var cellWidth = mapWidth / countX;
    var cellHeight = mapHeight / countY;

    var coordinates = [],
    curX = map.getBounds().getNorthWest().lng, curY = map.getBounds().getNorthWest().lat, //cursor
    //top-left/top-right/bottom-right/bottom-left
    tLx, tLy,   tRx, tRy,
    bRx, bRy,   bLx, bLy;

    var green = '#49FF00', red = '#FF0000', yellow = '#FFD500';

    var grid, counter, gridFeat;
    counter = 0;
    var gridCollection = [];
// build coordinates array, from top-left to bottom-right
// count by row
    for(var iY = 0; iY < countY; iY++){
  // count by cell in row
        for(var iX = 0; iX < countX; iX++){
            tLx = bLx = curX;
            tLy = tRy = curY;
            tRx = bRx = curX + cellWidth;
            bRy = bLy = curY - cellHeight;

            var cell = [
            // top-left/top-right/bottom-right/bottom-left/top-left
            [tLx, tLy], [tRx, tRy], [bRx, bRy], [bLx, bLy], [tLx, tLy]
            ];
            var color;
            fillColor = yellow;
            if (counter > 25 && counter < 53){
                fillColor = green;
            }
            else if (counter == 65){
                fillColor = red;
            } 
            gridFeat = {
                "type": "FeatureCollection",
                "features": [
                    {
                    "type": "Feature",
                    "properties": {
                        "popupContent": "TODO: add code and connect plot class " + counter.toString(),
                        "style": {
                            weight: 2,
                            color: "#FFFFFF",
                            opacity: 1,
                            fillColor: fillColor,
                            fillOpacity: 1
                        }
                    },
                    "geometry": {
                        "type": "Polygon",
                        "coordinates": [cell
                        ]
                    }
                }
                ]
            };
            grid = L.geoJSON(gridFeat, {style: function (feature) {return feature.properties.style;}, onEachFeature: function (feature, layer) {layer.bindPopup(feature.properties.popupContent)}});
            gridCollection.push(grid);
            // refresh cusror for cell
            curX = curX + cellWidth;
            counter += 1;
        }
  // refresh cursor for row
        curX = map.getBounds().getNorthWest().lng;
        curY = curY - cellHeight;
    }

    //var popup = L.popup();
    for (var i = 0; i < gridCollection.length; i++){
        gridCollection[i].addTo(map);
    }
    

    
</script>

</body>

</html>